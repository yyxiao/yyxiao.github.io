---
bg: "tools.jpg"
layout: post
title:  Shiro使用知识点
crawlertitle: "Shiro"
summary: "Shiro使用知识点"
date: 2017-08-23 13:44:00
categories: posts
tags: ['Java']
author: Xander
---

这段时间老夫接手一坑，系统使用springMVC+hibernate+shiro进行搭建，以前只自己搭建玩过shiro，
所以对一些知识点了解较少，刚好在这个系统上进行弥补。

* 以下提供一些过滤器仅供参考

 name| 功能| 描述 
 -----|-----| -----
 anon| 任何用户发送的请求都能够访问| $1600 
 authc| 经过认证的请求可访问，否则将会将请求重定向到ini 配置文件配置的authc.loginUrl 资源，进行认证操作  |   authc.loginUrl=/login.jsp
 logout| 结束会话|    logout.redirectUrl=/ `#结束会话后重定向到此资源` 
 port| 指定请求端口|

### 注册Shiro

* 方式一：使用java代码
使用java代码（在一个可以执行初始化操作的地方，比如ServletContainerInitializer的子类的onStartUp方法里，或者一个注册了loadOnStartUp的Servlet的init方法里）

```java
@Override
public void init(ServletConfig config) throws ServletException {
    ServletContext servletContext = config.getServletContext();
    //设置初始化参数
    servletContext.setInitParameter("shiroConfigLocation", "classPath:shiro.ini");
    //注册Listener
    servletContext.addListener(EnvironmentLoaderListener.class);
    //注册filter
    Dynamic dynamic = servletContext.addFilter("ShiroFilter", ShiroFilter.class);
    dynamic.addMappingForUrlPatterns(null, false, "/*");
}
```

* 方式二：在web.xml中配置
```xml
<context-param>
    <param-name>shiroConfigLocation</param-name>
    <param-value>classPath:shiro.ini</param-value>
</context-param>
<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>
<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>com.doservlet.plugin.security.SmartSecurityFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
```



